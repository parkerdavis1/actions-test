function $(){}function H(t){return t()}function L(){return Object.create(null)}function O(t){t.forEach(H)}function J(t){return typeof t=="function"}function Y(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function G(t){return Object.keys(t).length===0}let T=!1;function W(){T=!0}function Z(){T=!1}function X(t,e,n,i){for(;t<e;){const o=t+(e-t>>1);n(o)<=i?t=o+1:e=o}return t}function K(t){if(t.hydrate_init)return;t.hydrate_init=!0;let e=t.childNodes;if(t.nodeName==="HEAD"){const s=[];for(let a=0;a<e.length;a++){const f=e[a];f.claim_order!==void 0&&s.push(f)}e=s}const n=new Int32Array(e.length+1),i=new Int32Array(e.length);n[0]=-1;let o=0;for(let s=0;s<e.length;s++){const a=e[s].claim_order,f=(o>0&&e[n[o]].claim_order<=a?o+1:X(1,o,u=>e[n[u]].claim_order,a))-1;i[s]=n[f]+1;const d=f+1;n[d]=s,o=Math.max(d,o)}const c=[],r=[];let l=e.length-1;for(let s=n[o]+1;s!=0;s=i[s-1]){for(c.push(e[s-1]);l>=s;l--)r.push(e[l]);l--}for(;l>=0;l--)r.push(e[l]);c.reverse(),r.sort((s,a)=>s.claim_order-a.claim_order);for(let s=0,a=0;s<r.length;s++){for(;a<c.length&&r[s].claim_order>=c[a].claim_order;)a++;const f=a<c.length?c[a]:null;t.insertBefore(r[s],f)}}function v(t,e){if(T){for(K(t),(t.actual_end_child===void 0||t.actual_end_child!==null&&t.actual_end_child.parentNode!==t)&&(t.actual_end_child=t.firstChild);t.actual_end_child!==null&&t.actual_end_child.claim_order===void 0;)t.actual_end_child=t.actual_end_child.nextSibling;e!==t.actual_end_child?(e.claim_order!==void 0||e.parentNode!==t)&&t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling}else(e.parentNode!==t||e.nextSibling!==null)&&t.appendChild(e)}function S(t,e,n){T&&!n?v(t,e):(e.parentNode!==t||e.nextSibling!=n)&&t.insertBefore(e,n||null)}function m(t){t.parentNode&&t.parentNode.removeChild(t)}function R(t){return document.createElement(t)}function N(t){return document.createTextNode(t)}function P(){return N(" ")}function tt(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function et(t,e,n){t.getAttribute(e)!==n&&t.setAttribute(e,n)}function nt(t){return t.dataset.svelteH}function I(t){return Array.from(t.childNodes)}function it(t){t.claim_info===void 0&&(t.claim_info={last_index:0,total_claimed:0})}function Q(t,e,n,i,o=!1){it(t);const c=(()=>{for(let r=t.claim_info.last_index;r<t.length;r++){const l=t[r];if(e(l)){const s=n(l);return s===void 0?t.splice(r,1):t[r]=s,o||(t.claim_info.last_index=r),l}}for(let r=t.claim_info.last_index-1;r>=0;r--){const l=t[r];if(e(l)){const s=n(l);return s===void 0?t.splice(r,1):t[r]=s,o?s===void 0&&t.claim_info.last_index--:t.claim_info.last_index=r,l}}return i()})();return c.claim_order=t.claim_info.total_claimed,t.claim_info.total_claimed+=1,c}function rt(t,e,n,i){return Q(t,o=>o.nodeName===e,o=>{const c=[];for(let r=0;r<o.attributes.length;r++){const l=o.attributes[r];n[l.name]||c.push(l.name)}c.forEach(r=>o.removeAttribute(r))},()=>i(e))}function A(t,e,n){return rt(t,e,n,R)}function C(t,e){return Q(t,n=>n.nodeType===3,n=>{const i=""+e;if(n.data.startsWith(i)){if(n.data.length!==i.length)return n.splitText(i.length)}else n.data=i},()=>N(e),!0)}function F(t){return C(t," ")}function U(t,e){e=""+e,t.data!==e&&(t.data=e)}let w;function b(t){w=t}function ot(){if(!w)throw new Error("Function called outside component initialization");return w}function st(t){ot().$$.on_mount.push(t)}const y=[],j=[];let E=[];const M=[],at=Promise.resolve();let D=!1;function ct(){D||(D=!0,at.then(V))}function k(t){E.push(t)}const x=new Set;let p=0;function V(){if(p!==0)return;const t=w;do{try{for(;p<y.length;){const e=y[p];p++,b(e),lt(e.$$)}}catch(e){throw y.length=0,p=0,e}for(b(null),y.length=0,p=0;j.length;)j.pop()();for(let e=0;e<E.length;e+=1){const n=E[e];x.has(n)||(x.add(n),n())}E.length=0}while(y.length);for(;M.length;)M.pop()();D=!1,x.clear(),b(t)}function lt(t){if(t.fragment!==null){t.update(),O(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(k)}}function ut(t){const e=[],n=[];E.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),E=e}const ft=new Set;function dt(t,e){t&&t.i&&(ft.delete(t),t.i(e))}function _t(t,e,n){const{fragment:i,after_update:o}=t.$$;i&&i.m(e,n),k(()=>{const c=t.$$.on_mount.map(H).filter(J);t.$$.on_destroy?t.$$.on_destroy.push(...c):O(c),t.$$.on_mount=[]}),o.forEach(k)}function ht(t,e){const n=t.$$;n.fragment!==null&&(ut(n.after_update),O(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function mt(t,e){t.$$.dirty[0]===-1&&(y.push(t),ct(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function pt(t,e,n,i,o,c,r=null,l=[-1]){const s=w;b(t);const a=t.$$={fragment:null,ctx:[],props:c,update:$,not_equal:o,bound:L(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:L(),dirty:l,skip_bound:!1,root:e.target||s.$$.root};r&&r(a.root);let f=!1;if(a.ctx=n?n(t,e.props||{},(d,u,..._)=>{const g=_.length?_[0]:u;return a.ctx&&o(a.ctx[d],a.ctx[d]=g)&&(!a.skip_bound&&a.bound[d]&&a.bound[d](g),f&&mt(t,d)),u}):[],a.update(),f=!0,O(a.before_update),a.fragment=i?i(a.ctx):!1,e.target){if(e.hydrate){W();const d=I(e.target);a.fragment&&a.fragment.l(d),d.forEach(m)}else a.fragment&&a.fragment.c();e.intro&&dt(t.$$.fragment),_t(t,e.target,e.anchor),Z(),V()}b(s)}class yt{$$=void 0;$$set=void 0;$destroy(){ht(this,1),this.$destroy=$}$on(e,n){if(!J(n))return $;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(e){this.$$set&&!G(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Et="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Et);const q={BAD_REQUEST:400,UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,TIMEOUT:405,CONFLICT:409,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,UNSUPPORTED_MEDIA_TYPE:415,UNPROCESSABLE_CONTENT:422,TOO_MANY_REQUESTS:429,CLIENT_CLOSED_REQUEST:499,INTERNAL_SERVER_ERROR:500},gt=Object.entries(q).reduce((t,[e,n])=>({...t,[n]:e}),{});class h extends Error{type="AstroActionError";code="INTERNAL_SERVER_ERROR";status=500;constructor(e){super(e.message),this.code=e.code,this.status=h.codeToStatus(e.code),e.stack&&(this.stack=e.stack)}static codeToStatus(e){return q[e]}static statusToCode(e){return gt[e]??"INTERNAL_SERVER_ERROR"}static async fromResponse(e){const n=await e.clone().json();return typeof n=="object"&&n?.type==="AstroActionInputError"&&Array.isArray(n.issues)?new St(n.issues):typeof n=="object"&&n?.type==="AstroActionError"?new h(n):new h({message:e.statusText,code:h.statusToCode(e.status)})}}class St extends h{type="AstroActionInputError";issues;fields;constructor(e){super({message:`Failed to validate: ${JSON.stringify(e,null,2)}`,code:"BAD_REQUEST"}),this.issues=e,this.fields={};for(const n of e)if(n.path.length>0){const i=n.path[0].toString();this.fields[i]??=[],this.fields[i]?.push(n.message)}}}async function bt(t){try{return{data:await t(),error:void 0}}catch(e){return e instanceof h?{data:void 0,error:e}:{data:void 0,error:new h({message:e instanceof Error?e.message:"Unknown error",code:"INTERNAL_SERVER_ERROR"})}}}new Proxy({},{get(){throw new Error("[astro:action] `z` unexpectedly used on the client.")}});function z(t={},e="/_actions/"){return new Proxy(t,{get(n,i){if(i in n)return n[i];const o=e+i.toString(),c=r=>$t(r,o);return c.toString=()=>o,c.safe=r=>bt(()=>c(r)),c.safe.toString=()=>o,c.$$FORM_ACTION=function(){const r=new FormData;return r.set("_astroAction",c.toString()),{method:"POST",name:c.toString(),data:r}},c.safe.$$FORM_ACTION=function(){const r=new FormData;return r.set("_astroAction",c.toString()),r.set("_astroActionSafe","true"),{method:"POST",name:c.toString(),data:r}},z(c,o+".")}})}async function $t(t,e){const n=new Headers;n.set("Accept","application/json");let i=t;if(!(i instanceof FormData)){try{i=t?JSON.stringify(t):void 0}catch(r){throw new h({code:"BAD_REQUEST",message:`Failed to serialize request body to JSON. Full error: ${r.message}`})}n.set("Content-Type","application/json"),n.set("Content-Length",i?.length.toString()??"0")}const o=await fetch(e,{method:"POST",body:i,headers:n});if(!o.ok)throw await h.fromResponse(o);return o.status===204?void 0:await o.json()}const B=z();function wt(t){let e,n=`<label for="name">Name
        <input type="text" name="name"/></label> <label for="email">Email
        <input type="email" name="email" id="email"/></label> <button type="submit">Submit</button>`,i,o,c,r,l,s=JSON.stringify(t[1],null,2)+"",a,f,d;return{c(){e=R("form"),e.innerHTML=n,i=P(),o=R("p"),c=N(t[0]),r=P(),l=R("pre"),a=N(s),this.h()},l(u){e=A(u,"FORM",{method:!0,"data-svelte-h":!0}),nt(e)!=="svelte-714chq"&&(e.innerHTML=n),i=F(u),o=A(u,"P",{});var _=I(o);c=C(_,t[0]),_.forEach(m),r=F(u),l=A(u,"PRE",{});var g=I(l);a=C(g,s),g.forEach(m),this.h()},h(){et(e,"method","POST")},m(u,_){S(u,e,_),S(u,i,_),S(u,o,_),v(o,c),S(u,r,_),S(u,l,_),v(l,a),f||(d=tt(e,"submit",t[2]),f=!0)},p(u,[_]){_&1&&U(c,u[0]),_&2&&s!==(s=JSON.stringify(u[1],null,2)+"")&&U(a,s)},i:$,o:$,d(u){u&&(m(e),m(i),m(o),m(r),m(l)),f=!1,d()}}}function Rt(t,e,n){let i="waiting...",o=[];async function c(l){l.preventDefault();const s=new FormData(l.target),a=await B.form(s);console.log("result",a),n(0,i=a.message),r()}async function r(){n(1,o=await B.getSubmissions())}return st(async()=>await r()),[i,o,c]}class Nt extends yt{constructor(e){super(),pt(this,e,Rt,wt,Y,{})}}export{Nt as default};
